/*!
 * WP Site Identity (https://github.com/felixarntz/wp-site-identity)
 * By Felix Arntz (https://leaves-and-love.net)
 * Licensed under GNU General Public License v3 (http://www.gnu.org/licenses/gpl-3.0.html)
 */
!function(t,e){var i,n=t.media.view.MediaFrame.Select;i=n.extend({initialize:function(){e.defaults(this.options,{multiple:!1,editing:!1,state:"insert",metadata:{}}),n.prototype.initialize.apply(this,arguments)},createStates:function(){var e=this.options.mimeType?{type:this.options.mimeType}:{};this.states.add([new t.media.controller.Library({id:"insert",title:this.options.title,selection:this.options.selection,priority:20,toolbar:"main-insert",filterable:"dates",library:t.media.query(e),multiple:!1,editable:!0,displaySettings:!1,displayUserSettings:!1}),new t.media.controller.EditImage({model:this.options.editImage})])},bindHandlers:function(){n.prototype.bindHandlers.apply(this,arguments),this.on("toolbar:create:main-insert",this.createToolbar,this),this.on("content:render:edit-image",this.renderEditImageContent,this),this.on("toolbar:render:main-insert",this.renderMainInsertToolbar,this)},renderEditImageContent:function(){var e=new t.media.view.EditImage({controller:this,model:this.state().get("image")}).render();this.content.set(e),e.loadEditor()},renderMainInsertToolbar:function(t){var e=this;t.set("insert",{style:"primary",priority:80,text:e.options.buttonText,requires:{selection:!0},click:function(){e.close(),e.state().trigger("insert",e.state().get("selection")).reset()}})}}),t.media.view.MediaFrame.WPSIInsertFrame=i}(wp,_);